var strongValidation={defaults:{ajaxUrl:"",display:{successMessage:!1},scroll:{onError:!0,onErrorOffset:100,onSuccess:!0,onSuccessOffset:100},fields:{}},settings:{},setOpts:function(a){this.settings=jQuery.extend({},this.defaults,a)},rules:{},setRules:function(){for(var a=0;a<this.settings.fields.length;a++)"rating"===this.settings.fields[a].type&&1===this.settings.fields[a].required&&(this.rules[this.settings.fields[a].name]={ratingRequired:!0})},init:function(){var a={};"undefined"!=typeof window.strongForm&&(a=window.strongForm),this.setOpts(a),this.settings.display.successMessage?this.scrollOnSuccess():(this.setRules(),this.changeEvents(),this.customValidators(),this.validateForm())},changeEvents:function(){jQuery('input[type="text"], input[type="url"], input[type="email"], textarea',"#wpmtst-submission-form").on("change blur",function(a){a.target.value=a.target.value.trim()}),jQuery("input[type=url]").on("change",function(){this.value.length&&!/^https*:\/\//.test(this.value)&&(this.value="https://"+this.value)});for(var a=document.getElementsByClassName("strong-rating"),b=0;b<a.length;b++)a[b].addEventListener("click",this.handleRadioEvent,!0),a[b].addEventListener("keyup",this.handleRadioEvent,!0),a[b].addEventListener("change",function(){jQuery(this).valid()},!0)},handleRadioEvent:function(a){if(a.keyCode>=48&&a.keyCode<=53){var b=a.keyCode-48;jQuery(this).find('input[type="radio"][value='+b+"]").click()}},customValidators:function(){jQuery.validator.addMethod("ratingRequired",function(a,b){return jQuery(b).find("input:checked").val()>0},jQuery.validator.messages.required)},validateForm:function(){var a=jQuery("#wpmtst-submission-form");a.validate({onfocusout:!1,focusInvalid:!1,invalidHandler:function(a,b){var c=b.numberOfInvalids();if(c)if(strongValidation.settings.scroll.onError){if("undefined"!=typeof b.errorList[0]){var d=jQuery(b.errorList[0].element),e=d.closest(".form-field").offset(),f=e.top-strongValidation.settings.scroll.onErrorOffset;jQuery("html, body").animate({scrollTop:f},800,function(){d.focus()})}}else b.errorList[0].element.focus()},submitHandler:function(a){if(strongValidation.disableForm(),""!==strongValidation.settings.ajaxUrl){window.onbeforeunload=function(){return"Please wait while the form is submitted."};var b={url:strongValidation.settings.ajaxUrl,data:{action:"wpmtst_form2"},success:strongValidation.showResponse};jQuery(a).ajaxSubmit(b)}else a.submit()},rules:strongValidation.rules,errorPlacement:function(a,b){a.appendTo(b.closest("div.form-field"))},highlight:function(a,b,c){"checkbox"===a.type?jQuery(a).closest(".field-wrap").addClass(b).removeClass(c):"rating"===jQuery(a).data("fieldType")?jQuery(a).closest(".field-wrap").addClass(b).removeClass(c):jQuery(a).addClass(b).removeClass(c)},unhighlight:function(a,b,c){"checkbox"===a.type?jQuery(a).closest(".field-wrap").removeClass(b).addClass(c):"rating"===jQuery(a).data("fieldType")?jQuery(a).closest(".field-wrap").removeClass(b).addClass(c):jQuery(a).removeClass(b).addClass(c)}})},showResponse:function(a){window.onbeforeunload=null,strongValidation.enableForm();var b=JSON.parse(a);if(b.success)jQuery("#wpmtst-form").html(b.message),strongValidation.scrollOnSuccess();else for(var c in b.errors)b.errors.hasOwnProperty(c)&&jQuery("#wpmtst-submission-form").children(".field-"+c).find("span.error").remove().end().append('<span class="error">'+b.errors[c]+"</span>")},scrollOnSuccess:function(){if(strongValidation.settings.scroll.onSuccess){var a,b;a=jQuery(".wpmtst-testimonial-success").offset(),a&&(b=a.top-strongValidation.settings.scroll.onSuccessOffset,jQuery("#wpadminbar").length&&(b-=32),jQuery("html, body").animate({scrollTop:b},800))}},disableForm:function(){jQuery(".strong-form-wait").show(),jQuery("#wpmtst_submit_testimonial").prop("disabled",!0)},enableForm:function(){jQuery(".strong-form-wait").hide(),jQuery("#wpmtst_submit_testimonial").prop("disabled",!1)}},strongValidation={defaults:{ajaxUrl:"",display:{successMessage:!1},scroll:{onError:!0,onErrorOffset:100,onSuccess:!0,onSuccessOffset:100},fields:{}},settings:{},setOpts:function(a){this.settings=jQuery.extend({},this.defaults,a)},rules:{},setRules:function(){for(var a=0;a<this.settings.fields.length;a++)"rating"===this.settings.fields[a].type&&1===this.settings.fields[a].required&&(this.rules[this.settings.fields[a].name]={ratingRequired:!0})},init:function(){var a={};void 0!==window.strongForm&&(a=window.strongForm),this.setOpts(a),this.settings.display.successMessage?this.scrollOnSuccess():(this.setRules(),this.changeEvents(),this.customValidators(),this.validateForm())},changeEvents:function(){jQuery('input[type="text"], input[type="url"], input[type="email"], textarea',"#wpmtst-submission-form").on("change blur",function(a){a.target.value=a.target.value.trim()}),jQuery("input[type=url]").change(function(){this.value.length&&!/^https*:\/\//.test(this.value)&&(this.value="https://"+this.value)});for(var a=document.getElementsByClassName("strong-rating"),b=0;b<a.length;b++)a[b].addEventListener("click",this.handleRadioEvent,!0),a[b].addEventListener("keyup",this.handleRadioEvent,!0),a[b].addEventListener("change",function(){jQuery(this).valid()},!0)},handleRadioEvent:function(a){if(a.keyCode>=48&&a.keyCode<=53){var b=a.keyCode-48;jQuery(this).find('input[type="radio"][value='+b+"]").click()}},customValidators:function(){jQuery.validator.addMethod("ratingRequired",function(a,b){return jQuery(b).find("input:checked").val()>0},jQuery.validator.messages.required)},validateForm:function(){jQuery("#wpmtst-submission-form").validate({onfocusout:!1,focusInvalid:!1,invalidHandler:function(a,b){if(b.numberOfInvalids())if(strongValidation.settings.scroll.onError){if(void 0!==b.errorList[0]){var c=jQuery(b.errorList[0].element),d=c.closest(".form-field").offset().top-strongValidation.settings.scroll.onErrorOffset;jQuery("html, body").animate({scrollTop:d},800,function(){c.focus()})}}else b.errorList[0].element.focus()},submitHandler:function(a){if(strongValidation.disableForm(),""!==strongValidation.settings.ajaxUrl){window.onbeforeunload=function(){return"Please wait while the form is submitted."};var b={url:strongValidation.settings.ajaxUrl,data:{action:"wpmtst_form2"},success:strongValidation.showResponse};jQuery(a).ajaxSubmit(b)}else a.submit()},rules:strongValidation.rules,errorPlacement:function(a,b){a.appendTo(b.closest("div.form-field"))},highlight:function(a,b,c){"checkbox"===a.type?jQuery(a).closest(".field-wrap").addClass(b).removeClass(c):"rating"===jQuery(a).data("fieldType")?jQuery(a).closest(".field-wrap").addClass(b).removeClass(c):jQuery(a).addClass(b).removeClass(c)},unhighlight:function(a,b,c){"checkbox"===a.type?jQuery(a).closest(".field-wrap").removeClass(b).addClass(c):"rating"===jQuery(a).data("fieldType")?jQuery(a).closest(".field-wrap").removeClass(b).addClass(c):jQuery(a).removeClass(b).addClass(c)}})},showResponse:function(a){window.onbeforeunload=null,strongValidation.enableForm();var b=JSON.parse(a);if(b.success)jQuery("#wpmtst-form").html(b.message),strongValidation.scrollOnSuccess();else for(var c in b.errors)b.errors.hasOwnProperty(c)&&jQuery("#wpmtst-submission-form").children(".field-"+c).find("span.error").remove().end().append('<span class="error">'+b.errors[c]+"</span>")},scrollOnSuccess:function(){var a,b;strongValidation.settings.scroll.onSuccess&&(a=jQuery(".wpmtst-testimonial-success").offset())&&(b=a.top-strongValidation.settings.scroll.onSuccessOffset,jQuery("#wpadminbar").length&&(b-=32),jQuery("html, body").animate({scrollTop:b},800))},disableForm:function(){jQuery(".strong-form-wait").show(),jQuery("#wpmtst_submit_testimonial").prop("disabled",!0)},enableForm:function(){jQuery(".strong-form-wait").hide(),jQuery("#wpmtst_submit_testimonial").prop("disabled",!1)}};