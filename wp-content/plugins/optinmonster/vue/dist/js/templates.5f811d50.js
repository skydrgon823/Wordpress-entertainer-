(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["templates"],{2164:function(e,t,n){var i=n("cae7");function a(e,t,n){var a=-1,r=e.criteria,s=t.criteria,o=r.length,c=n.length;while(++a<o){var l=i(r[a],s[a]);if(l){if(a>=c)return l;var p=n[a];return l*("desc"==p?-1:1)}}return e.index-t.index}e.exports=a},"6a5c":function(e,t,n){var i=n("7948"),a=n("badf"),r=n("97d3"),s=n("d4b2"),o=n("b047"),c=n("2164"),l=n("cd9d");function p(e,t,n){var p=-1;t=i(t.length?t:[l],o(a));var u=r(e,function(e,n,a){var r=i(t,function(t){return t(e)});return{criteria:r,index:++p,value:e}});return s(u,function(e,t){return c(e,t,n)})}e.exports=p},"93c6":function(e,t,n){var i=n("6a5c"),a=n("6747");function r(e,t,n,r){return null==e?[]:(a(t)||(t=null==t?[]:[t]),n=r?void 0:n,a(n)||(n=null==n?[]:[n]),i(e,t,n))}e.exports=r},"9fe3":function(e,t,n){"use strict";var i=n("ad51"),a=n.n(i);a.a},ad51:function(e,t,n){},b0d4:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.reachedCampaignLimit?n("templates-limit-exceeded"):n("core-page",{attrs:{title:"Select a Campaign Type:",classes:"templates-wrapper"}},[n("common-alerts",{attrs:{alerts:e.alerts}}),n("div",{staticClass:"templates-content"},[n("templates-types"),n("templates-filters"),n("div",{staticClass:"omapi-content-area"},[n("templates-upsell-alerts"),e.hasTemplates?n("div",{staticClass:"omapi-template-listing-wrap"},[n("templates-grid",{attrs:{templates:e.selectedTemplates}}),e.isLoading?n("svg-loading",{style:{margin:"0 auto"}}):e._e()],1):e.isLoading?n("div",{staticClass:"archie-loader-wrapper"},[n("div",[n("core-loading",{staticClass:"loader"})],1)]):n("div",{staticClass:"no-templates-available"},[n("core-alert",{attrs:{type:e.validType?"info":"warn"}},[n("div",{staticClass:"alert-message"},[e._v("\n\t\t\t\t\t\t"+e._s(e.noTemplatesMessage)+"\n\t\t\t\t\t")])])],1)],1)],1),n("campaigns-modal-create-campaign"),n("templates-modal-not-connected"),n("templates-modal-no-access")],1)},a=[],r=(n("8e6e"),n("456d"),n("ac6a"),n("7f7f"),n("386d"),n("55dd"),n("6762"),n("2fdb"),n("7514"),n("bd86")),s=n("9b02"),o=n.n(s),c=n("93c6"),l=n.n(c),p=n("8103"),u=n.n(p),d=n("9c6cf"),m=n("2f62");function f(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach(function(t){Object(r["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=Object(m["a"])("templates"),g=h.mapState,b=h.mapActions,y=h.mapGetters,w={created:function(){var e=this;this.listenApiLoaded(),document.addEventListener("om.Main.getCampaigns",d["e"]),document.addEventListener("om.Campaigns.init",d["b"]),document.addEventListener("om.Optin.init",d["f"]),document.addEventListener("om.Campaign.afterShow",d["d"]),document.addEventListener("om.Campaign.startClose",d["c"]),this.$store.subscribe(function(t,n){var i=["templates/setLoadingPreview","templates/setPreviewing"];-1===i.indexOf(t.type)&&(Object(d["a"])(),e.$store.commit("templates/setLoadingPreview",""),e.$store.commit("templates/setPreviewing",""))}),this.$store.dispatch("campaigns/fetchDashboard").catch(function(){}),this.loadApi()},beforeDestroy:function(){document.removeEventListener("om.Main.getCampaigns",d["e"]),document.removeEventListener("om.Campaigns.init",d["b"]),document.removeEventListener("om.Optin.init",d["f"]),document.removeEventListener("om.Campaign.afterShow",d["d"]),document.removeEventListener("om.Campaign.startClose",d["c"])},computed:v({},g(["activeType","search","sort","popular","templates"]),{},y(["typePermitted","featured","filters","filterGamified","validType"]),{alerts:function(){return this.$get("$store.state.alerts",[])},isLoading:function(){return this.$store.getters.isLoading("templates")},popularTemplates:function(){var e=this.popular[this.activeType];return e&&e.length?this.order(e):[]},featuredTemplates:function(){var e=this.featured[this.activeType];return e&&e.length?this.order(e):[]},showableTemplates:function(){var e=this,t=function(t,n){return!e.filters[t].length||!e.filters[t].find(function(e){return!n.includes(e)})},n=["popular","featured"].includes(this.sort)?"".concat(this.sort,"Templates"):"templates",i=this[n].filter(function(t){return""===e.search||t.name.toLowerCase().includes(e.search.toLowerCase())}).filter(function(n){var i="mobile"===e.filters.device?n.mobile:!n.mobile;if(!i)return!1;var a=["goals","categories","tags"];return!a.find(function(e){return!t(e,n[e].map(function(e){return e.id}))})});return this.order(i)},selectedTemplates:function(){var e=this;return this.showableTemplates.filter(function(t){return e.filterGamified?t.tags.find(function(e){return 1===e.id}):t.type===e.activeType})},hasTemplates:function(){return this.selectedTemplates.length},shouldShowUpsells:function(){return!!this.$store.getters.connected&&!this.typePermitted(this.activeType)},noTemplatesMessage:function(){return this.validType?"No templates available for your current selection.":"".concat(u()(this.activeType)," is not a valid type. Please select one of the options above.")},reachedCampaignLimit:function(){if(!this.$store.getters.connected)return!1;var e=this.$get("$store.state.campaigns.totalCampaignsCount",0),t=o()(this.$store.getters.userAttribute("limits",{}),"campaigns",10);return e>t}}),mounted:function(){this.fetchTemplateData().catch(function(){}),this.$bus.$emit("dashboard-view-mounted","templates")},methods:v({},b(["fetchTemplateData"]),{listenApiLoaded:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"addEventListener";["om.Api.init","om.Main.init","om.Campaigns.init","om.Campaign.init"].forEach(function(n){return document[t](n,e.setApiLoaded)})},loadApi:function(){var e=document.getElementById("omwpapi-templates-apijs");if(!e){var t=document.getElementsByTagName("head")[0]||document.documentElement;e=document.createElement("script"),e.type="text/javascript",e.id="omwpapi-templates-apijs",e.src=this.$urls.apiJs(),e.async=!0,e.dataset.account=56690,e.dataset.user=50374,this.$env.isEnv("production")||(e.dataset.env=this.$env.isEnv("development")?"dev":this.$env.currentEnv),t.appendChild(e)}},setApiLoaded:function(e){this.listenApiLoaded("removeEventListener"),this.$store.commit("templates/apiLoaded")},applyFilters:function(e){this.$bus.$emit("applied-bulk-filter"),this.$store.commit("templates/appliedFilters",e)},order:function(e){var t=this;return l()(e,function(e){return"recent"===t.sort?-t.$moment(e.created_at).valueOf():e.name})}})},L=w,C=(n("9fe3"),n("2877")),T=Object(C["a"])(L,i,a,!1,null,null,null);t["default"]=T.exports},cae7:function(e,t,n){var i=n("ffd6");function a(e,t){if(e!==t){var n=void 0!==e,a=null===e,r=e===e,s=i(e),o=void 0!==t,c=null===t,l=t===t,p=i(t);if(!c&&!p&&!s&&e>t||s&&o&&l&&!c&&!p||a&&o&&l||!n&&l||!r)return 1;if(!a&&!s&&!p&&e<t||p&&n&&r&&!a&&!s||c&&n&&r||!o&&r||!l)return-1}return 0}e.exports=a},d4b2:function(e,t){function n(e,t){var n=e.length;e.sort(t);while(n--)e[n]=e[n].value;return e}e.exports=n}}]);
//# sourceMappingURL=templates.5f811d50.js.map