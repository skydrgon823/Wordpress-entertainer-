{"version":3,"sources":["webpack:///./src/pages/Campaign.vue?f2f3","webpack:///./src/pages/Campaign.vue?d7ef","webpack:///src/pages/Campaign.vue","webpack:///./src/pages/Campaign.vue?832e","webpack:///./src/pages/Campaign.vue?f512"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Campaign_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Campaign_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","to","name","_v","on","submit","$event","preventDefault","save","_s","title","id","alerts","class","disabled","isDisabled","size","contentClass","footerClass","scopedSlots","_u","key","fn","proxy","hasError","_e","campaign","color","changed","saving","campaignType","campaignId","newStatus","statusText","updateStatus","onChangeStatus","staticRenderFns","Campaignvue_type_script_lang_js_","mixins","mixins_campaign","data","orig","origMeta","mounted","routeId","fetch","updateTitle","window","addEventListener","maybePreventExit","beforeDestroy","removeEventListener","watch","isLoading","_isLoading","newVal","oldVal","fetchedCampaign","get_default","getMetaString","campaignStatus","diff","Object","utils","_newStatus","oldStatus","beforeRouteLeave","from","next","confirm","resetCampaign","computed","_objectSpread","vuex_esm","$get","getCampaign","isFetched","fetchingCampaign","isFetching","shouldFetch","showAlerts","$store","getters","Boolean","length","published","isSplit","settingEnabled","methods","_this","fetching","fetchCampaign","then","fetchWpData","catch","e","_this2","result","Promise","resolve","fetchWpDataForCampaign","fetched","afterFetched","_this3","commit","setStatus","campaigns","status","saveWordPress","settings","getSettings","dispatch","concat","setBannerTitle","val","JSON","stringify","event","returnValue","updateCampaignMeta","meta","toggleEmbed","enabled","pages_Campaignvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/campaign-edit.6f2e30e4.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Campaign.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Campaign.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.routeId)?_c('core-page',{staticClass:\"omapi-campaign-settings\"},[_c('router-link',{attrs:{\"to\":{ name: 'campaigns' }}},[_vm._v(\"‚Üê Return to Campaigns List\")]),(_vm.isLoading)?_c('core-loading',[_c('h1',[_vm._v(\"Loading...\")])]):_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.save($event)}}},[_c('h1',[_c('span',[_vm._v(_vm._s(_vm.title))])]),_c('common-alerts',{attrs:{\"id\":\"om-notification-campaign\",\"alerts\":_vm.alerts}}),_c('div',{staticClass:\"omapi-card__flex omapi-campaign-settings-sections\",class:{'disabled' : _vm.isDisabled}},[_c('common-card',{staticClass:\"omapi-campaign-settings__wrapper\",attrs:{\"size\":\"two-thirds\",\"title\":\"WordPress Output Settings\",\"contentClass\":\"omapi-card__border\",\"footerClass\":\"omapi-card__child\"},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_vm._v(\"WordPress Output Settings\")]},proxy:true},{key:\"footer\",fn:function(){return [(! _vm.hasError)?_c('campaigns-advanced-settings',{attrs:{\"campaign\":_vm.campaign}},[_c('core-save-button',{attrs:{\"color\":\"green\",\"disabled\":!_vm.changed,\"saving\":_vm.saving}})],1):_vm._e()]},proxy:true}],null,false,4152712531)},[(_vm.hasError)?_c('p',{staticClass:\"text-setting\"},[_vm._v(\"An error was encountered.\")]):[_c('p',{staticClass:\"text-setting\"},[_vm._v(\"Control when and where your campaigns are displayed once the targeting conditions are met.\")]),('Inline' === _vm.campaignType)?_c('campaigns-inline-settings',{attrs:{\"campaign\":_vm.campaign}}):_vm._e(),(_vm.hasMailPoet)?_c('campaigns-mailpoet-settings',{attrs:{\"campaign\":_vm.campaign}}):_vm._e()]],2),_c('campaigns-right-column',{attrs:{\"campaignId\":_vm.id,\"changed\":_vm.changed,\"saving\":_vm.saving,\"newStatus\":_vm.newStatus,\"statusText\":_vm.statusText},on:{\"updateStatus\":_vm.onChangeStatus}})],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<core-page class=\"omapi-campaign-settings\" v-if=\"routeId\">\n\t\t<router-link :to=\"{ name: 'campaigns' }\">&larr; Return to Campaigns List</router-link>\n\t\t<core-loading v-if=\"isLoading\"><h1>Loading...</h1></core-loading>\n\t\t<form v-else @submit.prevent=\"save\">\n\t\t\t<h1>\n\t\t\t\t<span>{{ title }}</span>\n\t\t\t</h1>\n\t\t\t<common-alerts id=\"om-notification-campaign\" :alerts=\"alerts\"/>\n\n\t\t\t<div class=\"omapi-card__flex omapi-campaign-settings-sections\" :class=\"{'disabled' : isDisabled}\">\n\t\t\t\t<common-card size=\"two-thirds\"\n\t\t\t\t\ttitle=\"WordPress Output Settings\"\n\t\t\t\t\tcontentClass=\"omapi-card__border\"\n\t\t\t\t\tfooterClass=\"omapi-card__child\"\n\t\t\t\t\tclass=\"omapi-campaign-settings__wrapper\"\n\t\t\t\t>\n\t\t\t\t\t<template v-slot:title>WordPress Output Settings</template>\n\t\t\t\t\t<p v-if=\"hasError\" class=\"text-setting\">An error was encountered.</p>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<p class=\"text-setting\">Control when and where your campaigns are displayed once the targeting conditions are met.</p>\n\n\t\t\t\t\t\t<campaigns-inline-settings\n\t\t\t\t\t\t\t:campaign=\"campaign\"\n\t\t\t\t\t\t\tv-if=\"'Inline' === campaignType\"\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<campaigns-mailpoet-settings\n\t\t\t\t\t\t\t:campaign=\"campaign\"\n\t\t\t\t\t\t\tv-if=\"hasMailPoet\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<template v-slot:footer>\n\t\t\t\t\t\t<campaigns-advanced-settings v-if=\"! hasError\" :campaign=\"campaign\">\n\t\t\t\t\t\t\t<core-save-button\n\t\t\t\t\t\t\t\tcolor=\"green\"\n\t\t\t\t\t\t\t\t:disabled=\"!changed\"\n\t\t\t\t\t\t\t\t:saving=\"saving\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</campaigns-advanced-settings>\n\t\t\t\t\t</template>\n\t\t\t\t</common-card>\n\n\t\t\t\t<campaigns-right-column\n\t\t\t\t\t:campaignId=\"id\"\n\t\t\t\t\t:changed=\"changed\"\n\t\t\t\t\t:saving=\"saving\"\n\t\t\t\t\t:newStatus=\"newStatus\"\n\t\t\t\t\t:statusText=\"statusText\"\n\t\t\t\t\t@updateStatus=\"onChangeStatus\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</form>\n\t</core-page>\n</template>\n\n<script lang=\"js\">\nimport get from 'lodash/get'\nimport { mapState, mapGetters, mapActions, mapMutations } from 'vuex'\nimport { campaign } from '@/campaigns/mixins/campaign'\nimport { findDiffPosition } from '@/utils'\n\nexport default  {\n\tmixins : [ campaign ],\n\tdata () {\n\t\treturn {\n\t\t\tchanged   : false,\n\t\t\torig      : false,\n\t\t\torigMeta  : {},\n\t\t\tnewStatus : '',\n\t\t\tsaving    : false,\n\t\t}\n\t},\n\tmounted () {\n\t\tif (!this.routeId) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.fetch()\n\t\tthis.updateTitle()\n\n\t\twindow.addEventListener('beforeunload', this.maybePreventExit)\n\t},\n\tbeforeDestroy () {\n\t\twindow.removeEventListener('beforeunload', this.maybePreventExit)\n\t},\n\twatch : {\n\t\tisLoading (isLoading) {\n\t\t\tif (!isLoading) {\n\t\t\t\tthis.fetch()\n\t\t\t}\n\t\t},\n\t\ttitle () {\n\t\t\tthis.updateTitle()\n\t\t},\n\t\tcampaign (newVal, oldVal) {\n\t\t\tif (!this.fetchedCampaign || !get(oldVal, 'wp')) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (!this.orig) {\n\t\t\t\tthis.orig = this.getMetaString(oldVal)\n\t\t\t}\n\n\t\t\tif (this.newStatus !== this.campaignStatus) {\n\t\t\t\tthis.changed = true\n\t\t\t\treturn\n\t\t\t}\n\t\t\tnewVal = this.getMetaString(newVal)\n\t\t\tconst diff = findDiffPosition(newVal, this.orig)\n\t\t\tthis.changed = -1 !== diff\n\t\t},\n\t\tnewStatus (newStatus, oldStatus) {\n\t\t\tif (!this.changed) {\n\t\t\t\tthis.changed = this.newStatus !== this.campaignStatus\n\t\t\t}\n\t\t},\n\t},\n\tbeforeRouteLeave (to, from, next) {\n\t\tif (!this.changed || confirm('You have unsaved changes. Are you sure you want to lose these changes?')) {\n\t\t\tthis.resetCampaign()\n\t\t\treturn next()\n\t\t}\n\t},\n\tcomputed : {\n\t\t...mapState([ 'alerts' ]),\n\t\t...mapState('campaigns', [ 'campaigns' ]),\n\t\t...mapGetters('campaigns', [ 'getCampaign', 'hasError' ]),\n\t\t...mapGetters('wp', [ 'hasMailPoet' ]),\n\t\t...mapGetters([ 'isFetched', 'isFetching' ]),\n\t\trouteId () {\n\t\t\treturn this.$get('$route.params.campaignId', '')\n\t\t},\n\t\t/**\n\t\t * Get the campaign object.\n\t\t * @returns {Object} The campaign object.\n\t\t */\n\t\tcampaign () {\n\t\t\treturn this.getCampaign(this.routeId)\n\t\t},\n\t\tfetchedCampaign () {\n\t\t\treturn this.isFetched(this.routeId)\n\t\t},\n\t\tfetchingCampaign () {\n\t\t\treturn this.isFetching(this.routeId)\n\t\t},\n\t\tshouldFetch () {\n\t\t\treturn !this.fetchingCampaign && !this.fetchedCampaign\n\t\t},\n\t\tisLoading () {\n\t\t\tif (this.showAlerts) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\treturn !this.fetchedCampaign ||\n\t\t\t\tthis.$store.getters.isLoading([ 'campaigns', 'me' ])\n\t\t},\n\t\tisDisabled () {\n\t\t\tif (this.hasError) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\treturn this.isLoading || !this.isFetched('wpResources')\n\t\t},\n\t\tshowAlerts () {\n\t\t\treturn Boolean(this.alerts.length)\n\t\t},\n\t\ttitle () {\n\t\t\treturn this.$get('campaign.name', 'No Campaign Found')\n\t\t},\n\t\t/**\n\t\t * Get the appropriate text for the campaign status column.\n\t\t *\n\t\t * - Seeing \"Draft\" status always indicates app status is Paused\n\t\t *   (regardless of embed code status)\n\t\t *\n\t\t * - Seeing \"Pending\" status always indicates either embed code status\n\t\t *   is disabled, or app status is Paused\n\t\t *\n\t\t * - Seeing \"Published\" status always indicates app status is Active\n\t\t *   and embed code status is enabled\n\t\t *\n\t\t * @returns {string} The text for the campaign status.\n\t\t */\n\t\tstatusText () {\n\t\t\tconst published = 'active' !== this.newStatus\n\n\t\t\tif (this.isSplit) {\n\t\t\t\treturn published ? 'Published' : 'Draft'\n\t\t\t}\n\n\t\t\tif (published) {\n\t\t\t\treturn this.settingEnabled ? 'Pending' : 'Draft'\n\t\t\t}\n\n\t\t\treturn this.settingEnabled ? 'Published' : 'Pending'\n\t\t},\n\t},\n\tmethods : {\n\t\t...mapActions('campaigns', [ 'fetchCampaign', 'fetchWpDataForCampaign', 'saveWordPress' ]),\n\t\t...mapMutations([ 'fetching', 'fetched' ]),\n\t\tfetch () {\n\t\t\tif (this.fetchingCampaign) {\n\t\t\t\t// Already in progress.\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (!this.fetchedCampaign) {\n\t\t\t\tthis.fetching(this.routeId)\n\t\t\t}\n\n\t\t\tthis.fetchCampaign({ campaignId: this.routeId })\n\t\t\t\t.then(() => this.fetchWpData())\n\t\t\t\t.catch(e => {})\n\t\t},\n\t\tfetchWpData () {\n\t\t\tconst result = this.fetchedCampaign\n\t\t\t\t? Promise.resolve()\n\t\t\t\t: this.fetchWpDataForCampaign({ campaignId: this.routeId })\n\n\t\t\treturn result\n\t\t\t\t.then(() => this.fetched(this.routeId))\n\t\t\t\t.then(() => this.afterFetched())\n\t\t\t\t.catch(e => {})\n\t\t},\n\t\tsave () {\n\t\t\tthis.$store.commit('clearAlerts')\n\n\t\t\tthis.saving = true\n\n\t\t\tthis.setStatus({ campaigns: [ this.id ], status: this.newStatus })\n\t\t\tthis.saveWordPress({\n\t\t\t\tcampaignId : this.id,\n\t\t\t\tsettings   : this.getSettings(),\n\t\t\t}).then(() => {\n\t\t\t\tthis.fetchWpData()\n\t\t\t})\n\t\t},\n\t\tafterFetched () {\n\t\t\tthis.orig      = this.getMetaString(this.campaign)\n\t\t\tthis.origMeta  = this.$get('campaign.wp.post_meta', {})\n\t\t\tthis.newStatus = this.campaignStatus\n\t\t\tthis.changed   = false\n\t\t\tthis.saving    = false\n\t\t},\n\t\tupdateTitle () {\n\t\t\tconst title = this.$get('campaign.name', this.id)\n\t\t\tif (title) {\n\t\t\t\tthis.$store.dispatch('setTitle', { title: `Output Settings: ${title}`, setBannerTitle: false })\n\t\t\t\tthis.$store.commit('setBannerTitle', 'Campaign Output Settings')\n\t\t\t}\n\t\t},\n\t\tgetMetaString (val) {\n\t\t\tconst settings = this.getSettings(get(val, 'wp.post_meta', {}))\n\t\t\treturn JSON.stringify(settings) + this.newStatus\n\t\t},\n\t\t/**\n\t\t * The browser `beforeunload` callback to help catch users who are\n\t\t * navigating away from our page, but have unsaved changes.\n\t\t *\n\t\t * See https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeunload\n\t\t *\n\t\t * @param {Object} event The `beforeunload` event object.\n\t\t *\n\t\t * @returns {string} The message to display in the browser alert.\n\t\t */\n\t\tmaybePreventExit (event) {\n\t\t\tif (this.changed) {\n\t\t\t\t// Cancel the event\n\t\t\t\tevent.preventDefault()\n\n\t\t\t\t// Chrome requires returnValue to be set\n\t\t\t\tevent.returnValue = 'You have unsaved changes. Are you sure you want to lose these changes?'\n\n\t\t\t\treturn event.returnValue\n\t\t\t}\n\t\t},\n\t\tresetCampaign () {\n\t\t\tthis.newStatus = this.campaignStatus\n\t\t\tthis.updateCampaignMeta({\n\t\t\t\tcampaignId : this.id,\n\t\t\t\tmeta       : this.origMeta,\n\t\t\t})\n\t\t},\n\t\tonChangeStatus (status) {\n\t\t\tswitch (status) {\n\t\t\tcase 'Pending':\n\t\t\t\tthis.toggleEmbed('active' !== this.newStatus)\n\t\t\t\tbreak\n\t\t\tcase 'Published':\n\t\t\t\tthis.newStatus = 'active'\n\t\t\t\tthis.toggleEmbed(true)\n\t\t\t\tbreak\n\t\t\tcase 'Draft':\n\t\t\t\tthis.newStatus = 'paused'\n\t\t\t\tthis.toggleEmbed(false)\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tbreak\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Toggle the embed code on/off.\n\t\t *\n\t\t * @since  2.0.0\n\t\t *\n\t\t * @param  {boolean} enabled Whether to set embed enabled/disabled.\n\t\t *\n\t\t * @returns {void}\n\t\t */\n\t\ttoggleEmbed (enabled) {\n\t\t\tif (enabled !== this.settingEnabled) {\n\t\t\t\tthis.settingEnabled = enabled\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n\t@import '../assets/scss/variables';\n\t@import '../assets/scss/pages/campaign';\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Campaign.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Campaign.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Campaign.vue?vue&type=template&id=71cca2be&\"\nimport script from \"./Campaign.vue?vue&type=script&lang=js&\"\nexport * from \"./Campaign.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Campaign.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}