!function(r){"use strict";var u={init:function(){r(document).ready(function(){r(".wpr-template-popup").length&&!u.editorCheck()&&(u.openPopupInit(),u.closePopupInit())})},openPopupInit:function(){r(".wpr-template-popup").each(function(){var e=r(this),p=u.getID(e);if(u.checkAvailability(p)&&u.checkStopShowingAfterDate(e)){u.setLocalStorage(e,"show");var o,t,n,a=JSON.parse(localStorage.getItem("WprPopupSettings"))[p];if(!u.checkAvailableDevice(e,a))return!1;u.popupTriggerInit(e),"load"===a.popup_trigger?(o=1e3*a.popup_load_delay,r(window).on("load",function(){setTimeout(function(){u.openPopup(e,a)},o)})):"scroll"===a.popup_trigger?r(window).on("scroll",function(){var p=r(window).scrollTop()/(r(document).height()-r(window).height());(p=Math.round(100*p))>=a.popup_scroll_progress&&!e.hasClass("wpr-popup-open")&&u.openPopup(e,a)}):"element-scroll"===a.popup_trigger?r(window).on("scroll",function(){var p=r(a.popup_element_scroll),o=r(window).scrollTop()+r(window).height();p.length&&p.offset().top<o&&!e.hasClass("wpr-popup-open")&&u.openPopup(e,a)}):"date"===a.popup_trigger?(p=Date.now(),Date.parse(a.popup_specific_date)<p&&setTimeout(function(){u.openPopup(e,a)},1e3)):"inactivity"===a.popup_trigger?(t=null,n=1e3*a.popup_inactivity_time,r("*").bind("mousemove click keyup scroll resize",function(){e.hasClass("wpr-popup-open")||(clearTimeout(t),t=setTimeout(function(){u.openPopup(e,a)},n))}),r("body").trigger("mousemove")):"exit"===a.popup_trigger?r(document).on("mouseleave","body",function(p){e.hasClass("wpr-popup-open")||u.openPopup(e,a)}):"custom"===a.popup_trigger&&(r(a.popup_custom_trigger).on("click",function(){u.openPopup(e,a)}),r(a.popup_custom_trigger).css("cursor","pointer")),"0px"!==e.find(".wpr-popup-container-inner").css("height")&&new PerfectScrollbar(e.find(".wpr-popup-container-inner")[0])}})},openPopup:function(p,o){"notification"===o.popup_display_as&&(p.addClass("wpr-popup-notification"),setTimeout(function(){r("body").animate({"padding-top":p.find(".wpr-popup-container").outerHeight()+"px"},1e3*o.popup_animation_duration,"linear")},10)),o.popup_disable_page_scroll&&"modal"===o.popup_display_as&&r("body").css("overflow","hidden"),p.addClass("wpr-popup-open").show(),p.find(".wpr-popup-container").addClass("animated "+o.popup_animation),r(".wpr-popup-overlay").hide().fadeIn(),p.find(".wpr-popup-close-btn").css("opacity","0"),setTimeout(function(){p.find(".wpr-popup-close-btn").animate({opacity:"1"},500)},1e3*o.popup_close_button_display_delay),!1!==o.popup_automatic_close_switch&&setTimeout(function(){u.closePopup(p)},1e3*o.popup_automatic_close_delay)},closePopupInit:function(){r(".wpr-popup-close-btn").on("click",function(){u.closePopup(r(this).closest(".wpr-template-popup"))}),r(".wpr-popup-overlay").on("click",function(){var p=r(this).closest(".wpr-template-popup"),o=u.getID(p);0==u.getLocalStorage(o).popup_overlay_disable_close&&u.closePopup(p)}),r(document).on("keyup",function(p){var o,e=r(".wpr-popup-open");e.length&&(o=u.getID(e),o=u.getLocalStorage(o),27==p.keyCode&&0==o.popup_disable_esc_key&&u.closePopup(e))})},closePopup:function(p){var o=u.getID(p),o=u.getLocalStorage(o);"notification"===o.popup_display_as&&r("body").css("padding-top",0),u.setLocalStorage(p,"hide"),"modal"===o.popup_display_as?p.fadeOut():p.hide(),r("body").css("overflow","visible")},popupTriggerInit:function(i){var p=i.find(".wpr-popup-trigger-button");p.length&&p.on("click",function(){var p=JSON.parse(localStorage.getItem("WprPopupSettings"))||{},o=r(this).attr("data-trigger"),e=r(this).attr("data-show-delay"),t=r(this).attr("data-redirect"),n=r(this).attr("data-redirect-url"),a=u.getID(i);"close"===o||"close-permanently"===o?(p[a].popup_show_again_delay=parseInt(e,10),p[a].popup_close_time=Date.now()):"back"===o&&window.history.back(),u.closePopup(i),localStorage.setItem("WprPopupSettings",JSON.stringify(p)),"back"!==o&&"yes"===t&&setTimeout(function(){window.location.href=n},100)})},getLocalStorage:function(p){var o=JSON.parse(localStorage.getItem("WprPopupSettings"));if(null==o)return!1;p=o[p];return null!=p&&p},setLocalStorage:function(p,o){var e=u.getID(p),t=JSON.parse(p.attr("data-settings")),p=JSON.parse(localStorage.getItem("WprPopupSettings"))||{};p[e]=t,p[e].popup_close_time="hide"===o&&Date.now(),localStorage.setItem("WprPopupSettings",JSON.stringify(p))},checkStopShowingAfterDate:function(p){var o=JSON.parse(p.attr("data-settings")),p=Date.now();return!("yes"===o.popup_stop_after_date&&p>=Date.parse(o.popup_stop_after_date_select))},checkAvailability:function(p){var o=r("#wpr-popup-id-"+p),e=JSON.parse(o.attr("data-settings")),t=window.location.href;if("yes"!==e.popup_show_via_referral||-1!==t.indexOf("wpr_templates=user-popup")||-1!=t.indexOf(e.popup_referral_keyword)){if(!1===u.getLocalStorage(p))return!0;var n=o.find(".wpr-popup-trigger-button"),t=n.attr("data-show-delay"),o=Date.now(),a=u.getLocalStorage(p);if(t){var i=!0;if(n.each(function(){var p=r(this).attr("data-show-delay");a.popup_show_again_delay==parseInt(p,10)&&(i=!1)}),!0===i)return!0}else if(a.popup_show_again_delay!=e.popup_show_again_delay)return!0;return!(o<=(a.popup_close_time||0)+parseInt(a.popup_show_again_delay,10))}},checkAvailableDevice:function(p,o){var e=r("body").prop("clientWidth");return 1024<e?Boolean(o.popup_show_on_device):768<e?Boolean(o.popup_show_on_device_tablet):Boolean(o.popup_show_on_device_mobile)},getID:function(p){return p.attr("id").replace("wpr-popup-id-","")},editorCheck:function(){return!!r("body").hasClass("elementor-editor-active")}};u.init()}(jQuery,window.elementorFrontend);