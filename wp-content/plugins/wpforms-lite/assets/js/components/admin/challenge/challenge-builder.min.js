"use strict";var WPFormsChallenge=window.WPFormsChallenge||{};WPFormsChallenge.builder=window.WPFormsChallenge.builder||function(e,o,l){var n={init:function(){l(n.ready),l(o).on("load",function(){l.isFunction(l.ready.then)?l.ready.then(n.load):n.load()})},ready:function(){n.setup(),n.events()},load:function(){-1<["started","paused"].indexOf(wpforms_challenge_admin.option.status)&&(WPFormsChallenge.core.updateTooltipUI(),n.gotoStep()),l(".wpforms-challenge").show()},setup:function(){"inited"===wpforms_challenge_admin.option.status&&(WPFormsChallenge.core.clearLocalStorage(),n.showWelcomePopup()),l("#wpforms-embed").addClass("wpforms-disabled");l.each(["#wpforms-setup-name",".wpforms-setup-title.core","#add-fields a i","#wpforms-builder-settings-notifications-title"],function(e,o){WPFormsChallenge.core.initTooltips(e+1,o,null)})},events:function(){l("#wpforms-challenge-welcome-builder-popup").on("click","button",n.startChallenge),l(".wpforms-challenge-step1-done").on("click",function(){WPFormsChallenge.core.stepCompleted(1)}),l("#wpforms-builder").off("click",".wpforms-template-select").on("click",".wpforms-template-select",function(e){n.builderTemplateSelect(this,e)}).on("wpformsPanelSwitch wpformsPanelSectionSwitch",function(){WPFormsChallenge.core.updateTooltipUI()}),l(".wpforms-challenge-step3-done").on("click",function(){WPFormsChallenge.core.stepCompleted(3),n.gotoStep(4)}),l(e).on("click",".wpforms-challenge-step4-done",n.showEmbedPopup),l.tooltipster.on("ready",n.tooltipsterReady)},startChallenge:function(){WPFormsChallenge.admin.saveChallengeOption({status:"started"}),WPFormsChallenge.core.initListUI("started"),l(".wpforms-challenge-popup-container").fadeOut(function(){l("#wpforms-challenge-welcome-builder-popup").hide()}),WPFormsChallenge.core.timer.run(WPFormsChallenge.core.timer.initialSecondsLeft),WPFormsChallenge.core.updateTooltipUI()},gotoStep:function(e){switch(e=e||WPFormsChallenge.core.loadStep()+1){case 1:case 2:WPFormsBuilder.panelSwitch("setup");break;case 3:WPFormsBuilder.panelSwitch("fields");break;case 4:WPFormsBuilder.panelSwitch("settings"),WPFormsBuilder.panelSectionSwitch(l(".wpforms-panel .wpforms-panel-sidebar-section-notifications"));break;case 5:n.showEmbedPopup()}},builderTemplateSelect:function(e,o){"paused"===wpforms_challenge_admin.option.status&&WPFormsChallenge.core.resumeChallenge(),WPFormsChallenge.core.loadStep()<=1?WPFormsChallenge.core.stepCompleted(2).done(WPFormsBuilder.templateSelect.bind(null,e,o)):WPFormsBuilder.templateSelect(e,o)},tooltipsterReady:function(e){var o=l(e.origin).data("wpforms-challenge-step"),e=l("#wpforms-builder-form").data("id"),o=parseInt(o,10)||0,e=parseInt(e,10)||0;3===o&&0<e&&WPFormsChallenge.admin.saveChallengeOption({form_id:e})},showWelcomePopup:function(){l("#wpforms-challenge-welcome-builder-popup").show(),l(".wpforms-challenge-popup-container").fadeIn()},showEmbedPopup:function(){WPFormsChallenge.core.stepCompleted(4),WPFormsFormEmbedWizard.openPopup()}};return n}(document,window,jQuery),WPFormsChallenge.builder.init();